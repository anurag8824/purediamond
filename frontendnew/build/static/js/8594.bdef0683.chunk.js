"use strict";(self.webpackChunkfair_react=self.webpackChunkfair_react||[]).push([[8594],{18594:(e,s,a)=>{a.r(s),a.d(s,{default:()=>p});var n=a(84919),i=a(9950),r=a(60666),t=a(9449),l=a(26473),c=a(27232),o=a(39564),d=a(88306),u=a(39402),m=a(97758),h=(a(70103),a(44414));const p=()=>{var e;const s=(0,u.Y)(),{client:a,loading:p,error:x}=(0,m.h)(),j=i.useMemo((()=>r.Ik().shape({amount:r.ai().required("New limit is required").transform((e=>isNaN(e)?0:+e)).min(0,"Limit must be positive"),transactionPassword:r.Yj().required("Transaction Password is required")})),[]),{register:v,handleSubmit:b,reset:f,formState:{errors:N}}=(0,t.mN)({resolver:(0,l.t)(j)}),g=b((e=>{if(!a)return;const s=(0,n.A)((0,n.A)({},e),{},{username:a.username,walletUpdateType:"EXP"});o.A.updateUserExposureAndCreditLimit(s).then((()=>{c.oR.success("Exposure limit updated successfully"),f()}))}));return p?(0,h.jsx)("div",{className:"client-action-page",children:(0,h.jsx)("div",{className:"loading-state",children:"Loading client details..."})}):x||!a?(0,h.jsx)("div",{className:"client-action-page",children:(0,h.jsxs)("div",{className:"empty-state",children:["Unable to load requested client.",(0,h.jsx)("span",{children:x||"Please go back and try again."})]})}):(0,h.jsx)("div",{className:"client-action-page",children:(0,h.jsxs)("div",{className:"client-action-card",children:[(0,h.jsx)("div",{className:"client-action-back",children:(0,h.jsxs)("button",{className:"btn btn-secondary",onClick:()=>s.back(),children:[(0,h.jsx)("i",{className:"fas fa-arrow-left"})," Back"]})}),(0,h.jsxs)("div",{className:"client-action-heading",children:[(0,h.jsx)("h2",{children:"Exposure Limit"}),(0,h.jsxs)("p",{children:["Adjust the exposure ceiling for ",a.username]})]}),(0,h.jsxs)("div",{className:"client-action-hint",children:["Current Exposure Limit: ",(0,h.jsx)("strong",{children:null!==(e=a.exposerLimit)&&void 0!==e?e:0})]}),(0,h.jsxs)("form",{className:"client-action-form",onSubmit:g,children:[(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{children:"New Exposure Limit"}),(0,h.jsx)("input",(0,n.A)((0,n.A)({type:"number",min:0,className:"form-control"},v("amount")),{},{placeholder:"Enter new exposure limit"})),(null===N||void 0===N?void 0:N.amount)&&(0,h.jsx)("span",{className:"error",children:N.amount.message})]}),(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{children:"Transaction Password"}),(0,h.jsx)("input",(0,n.A)((0,n.A)({type:"password",className:"form-control"},v("transactionPassword")),{},{placeholder:"Enter transaction password"})),(null===N||void 0===N?void 0:N.transactionPassword)&&(0,h.jsx)("span",{className:"error",children:N.transactionPassword.message})]}),(0,h.jsxs)("div",{className:"client-action-footer ",children:[(0,h.jsx)("button",{type:"button",className:"btn btn-outline-secondary",onClick:()=>s.back(),children:"Cancel"}),(0,h.jsxs)(d.A,{type:"submit",className:"btn btn-primary",children:[(0,h.jsx)("i",{className:"fas fa-check mr-2"})," Update Limit"]})]})]})]})})}},97758:(e,s,a)=>{a.d(s,{h:()=>t});var n=a(9950),i=a(28429),r=a(39564);const t=()=>{const{username:e}=(0,i.g)(),[s,a]=n.useState(null),[t,l]=n.useState(!0),[c,o]=n.useState(null),d=n.useCallback((()=>{if(!e)return a(null),l(!1),void o("Username missing in URL");l(!0),o(null),r.A.getParentUserDetail(e).then((e=>{var s,n;const i=null===(s=e.data)||void 0===s||null===(n=s.data)||void 0===n?void 0:n[0];a(null!==i&&void 0!==i?i:null)})).catch((()=>{a(null),o("Unable to load client details. Please try again.")})).finally((()=>l(!1)))}),[e]);return n.useEffect((()=>{d()}),[d]),{username:e,client:s,loading:t,error:c,refresh:d}}},88306:(e,s,a)=>{a.d(s,{A:()=>o});var n=a(84919),i=a(79222),r=(a(9950),a(96487)),t=a(28674),l=a(44414);const c=["children"],o=e=>{const{children:s}=e,a=(0,i.A)(e,c),o=(0,t.G)(r.Mm);return(0,l.jsx)("button",(0,n.A)((0,n.A)({disabled:o},a),{},{children:s}))}},70103:()=>{}}]);