"use strict";(self.webpackChunkfair_react=self.webpackChunkfair_react||[]).push([[154],{80154:(s,e,a)=>{a.r(e),a.d(e,{default:()=>p});var r=a(84919),n=a(9950),l=a(60666),t=a(9449),c=a(26473),i=a(27232),o=a(39564),d=a(88306),m=a(39402),u=a(97758),h=(a(70103),a(44414));const p=()=>{const s=(0,m.Y)(),{client:e,loading:a,error:p}=(0,u.h)(),w=n.useMemo((()=>l.Ik().shape({password:l.Yj().required("Password is required").min(8,"Password must be at least 8 characters").matches(/^(?=[^a-z]*[a-z])(?=[^A-Z]*[A-Z])(?=\D*\d)[A-Za-z0-9]{8,32}$/,"Must include number, uppercase and lowercase letters"),confirmPassword:l.Yj().required("Confirm password is required").oneOf([l.KR("password")],"Passwords must match"),transactionPassword:l.Yj().required("Transaction Password is required")})),[]),{register:f,handleSubmit:j,reset:x,formState:{errors:b}}=(0,t.mN)({resolver:(0,c.t)(w)}),v=j((s=>{if(!e)return;const a=(0,r.A)((0,r.A)({},s),{},{username:e.username});o.A.updatePassword(a).then((()=>{i.oR.success("Password updated successfully"),x()}))}));return a?(0,h.jsx)("div",{className:"client-action-page",children:(0,h.jsx)("div",{className:"loading-state",children:"Loading client details..."})}):p||!e?(0,h.jsx)("div",{className:"client-action-page",children:(0,h.jsxs)("div",{className:"empty-state",children:["Unable to load requested client.",(0,h.jsx)("span",{children:p||"Please go back and try again."})]})}):(0,h.jsx)("div",{className:"client-action-page",children:(0,h.jsxs)("div",{className:"client-action-card",children:[(0,h.jsx)("div",{className:"client-action-back",children:(0,h.jsxs)("button",{className:"btn btn-secondary",onClick:()=>s.back(),children:[(0,h.jsx)("i",{className:"fas fa-arrow-left"})," Back"]})}),(0,h.jsxs)("div",{className:"client-action-heading",children:[(0,h.jsx)("h2",{children:"Change Password"}),(0,h.jsxs)("p",{children:["Update login credentials for ",e.username]})]}),(0,h.jsxs)("form",{className:"client-action-form",onSubmit:v,children:[(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{children:"New Password"}),(0,h.jsx)("input",(0,r.A)((0,r.A)({type:"password",className:"form-control"},f("password")),{},{placeholder:"Enter new password",maxLength:20})),(null===b||void 0===b?void 0:b.password)&&(0,h.jsx)("span",{className:"error",children:b.password.message})]}),(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{children:"Confirm Password"}),(0,h.jsx)("input",(0,r.A)((0,r.A)({type:"password",className:"form-control"},f("confirmPassword")),{},{placeholder:"Confirm password",maxLength:20})),(null===b||void 0===b?void 0:b.confirmPassword)&&(0,h.jsx)("span",{className:"error",children:b.confirmPassword.message})]}),(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{children:"Transaction Password"}),(0,h.jsx)("input",(0,r.A)((0,r.A)({type:"password",className:"form-control"},f("transactionPassword")),{},{placeholder:"Enter transaction password"})),(null===b||void 0===b?void 0:b.transactionPassword)&&(0,h.jsx)("span",{className:"error",children:b.transactionPassword.message})]}),(0,h.jsxs)("div",{className:"client-action-footer",children:[(0,h.jsx)("button",{type:"button",className:"btn btn-outline-secondary",onClick:()=>s.back(),children:"Cancel"}),(0,h.jsxs)(d.A,{type:"submit",className:"btn btn-primary",children:[(0,h.jsx)("i",{className:"fas fa-check mr-2"})," Update Password"]})]})]})]})})}},97758:(s,e,a)=>{a.d(e,{h:()=>t});var r=a(9950),n=a(28429),l=a(39564);const t=()=>{const{username:s}=(0,n.g)(),[e,a]=r.useState(null),[t,c]=r.useState(!0),[i,o]=r.useState(null),d=r.useCallback((()=>{if(!s)return a(null),c(!1),void o("Username missing in URL");c(!0),o(null),l.A.getParentUserDetail(s).then((s=>{var e,r;const n=null===(e=s.data)||void 0===e||null===(r=e.data)||void 0===r?void 0:r[0];a(null!==n&&void 0!==n?n:null)})).catch((()=>{a(null),o("Unable to load client details. Please try again.")})).finally((()=>c(!1)))}),[s]);return r.useEffect((()=>{d()}),[d]),{username:s,client:e,loading:t,error:i,refresh:d}}},88306:(s,e,a)=>{a.d(e,{A:()=>o});var r=a(84919),n=a(79222),l=(a(9950),a(96487)),t=a(28674),c=a(44414);const i=["children"],o=s=>{const{children:e}=s,a=(0,n.A)(s,i),o=(0,t.G)(l.Mm);return(0,c.jsx)("button",(0,r.A)((0,r.A)({disabled:o},a),{},{children:e}))}},70103:()=>{}}]);