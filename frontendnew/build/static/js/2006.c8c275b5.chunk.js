"use strict";(self.webpackChunkfair_react=self.webpackChunkfair_react||[]).push([[2006],{20381:(e,l,s)=>{s.d(l,{A:()=>d});var a=s(9950),t=s(72509),n=s.n(t),c=s(44414);const d=(0,a.forwardRef)(((e,l)=>{let{onSuggestionsFetchRequested:s,onSelectUser:t,placeHolder:d,onSuggestionsClear:r}=e;const[i,o]=a.useState(""),[h,m]=a.useState([]),x={placeholder:d||"Search User",value:i,onChange:(e,l)=>{let{newValue:s}=l;o(s)}};return(0,a.useImperativeHandle)(l,(()=>({resetValue(){o(""),m([])}})),[]),(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(n(),{suggestions:h,onSuggestionsFetchRequested:e=>{let{value:l}=e;o(l),s({value:l}).then((e=>{m(e.data.data)}))},onSuggestionsClearRequested:()=>{},getSuggestionValue:e=>(t(e),e.username),renderSuggestion:e=>(0,c.jsx)("div",{className:"dropdown-item",children:e.username}),inputProps:x,theme:{suggestionsList:"dropdown-menu show",input:"mx-input",suggestionsContainer:"dropdown"}})})}))},42006:(e,l,s)=>{s.r(l),s.d(l,{default:()=>f});var a=s(84919),t=s(59051),n=s.n(t),c=s(9950),d=s(99198),r=s.n(d),i=s(27232),o=s(4446),h=s(41925),m=s(41377),x=s(39564),u=s(20381),p=s(18538),v=s(34806),j=s.n(v),g=s(2318),N=s(28674),b=s(96487),w=s(44414);const f=()=>{var e,l,s,t,d,v,f,y,S;const A=(0,N.G)(b.Mm),[C,D]=c.useState({}),[k,L]=c.useState([]),[F,B]=c.useState(0),[M,U]=c.useState([]),[R,T]=c.useState(0),[Y]=c.useState(50),[P,E]=c.useState(0),[_,H]=c.useState(!1),[I,W]=c.useState({}),[$,q]=c.useState(!1),[G,O]=c.useState({}),[V,K]=c.useState({}),[Q,J]=c.useState(0),[Z,z]=c.useState({startDate:"",endDate:"",reportType:"All",userId:""}),[X,ee]=c.useState(1),[le,se]=c.useState(1);c.useEffect((()=>{const e=R+Y;U(k.slice(R,e)),E(Math.ceil(k.length/Y))}),[R,Y,k]);c.useEffect((()=>{const e=Z;e.startDate=n()().subtract(0,"days").format("YYYY-MM-DD"),e.endDate=n()().format("YYYY-MM-DD"),z(e)}),[]);const ae=e=>{o.A.getAccountList(e,Z).then((l=>{var s,a,t,c,d,r,i,o,m,x,u;null!==l&&void 0!==l&&null!==(s=l.data)&&void 0!==s&&s.data&&D((null===l||void 0===l||null===(a=l.data)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.items)||[]),null!==l&&void 0!==l&&null!==(c=l.data)&&void 0!==c&&null!==(d=c.data)&&void 0!==d&&d.items&&0==e&&J((null===l||void 0===l||null===(r=l.data)||void 0===r||null===(i=r.data)||void 0===i?void 0:i.openingBalance)||0),L(((e,l)=>{const s=[];return e&&e.map(((e,a)=>{l+=e.amount,s.push({_id:e._id,sr_no:a+1,date:n()(e.createdAt).format(h.i$),credit:e.amount,debit:e.amount,closing:l.toFixed(2),narration:e.narration,type:e.type,stmt:e})})),s})((null===l||void 0===l||null===(o=l.data)||void 0===o||null===(m=o.data)||void 0===m?void 0:m.items)||[],(null===l||void 0===l||null===(x=l.data)||void 0===x||null===(u=x.data)||void 0===u?void 0:u.openingBalance)||0)),ee(e)})).catch((e=>{console.log(e),i.oR.error("error")}))},te=e=>{const l=Z;l[e.target.name]=e.target.value,z(l)};c.useEffect((()=>{ae(1)}),[]);c.useEffect((()=>{$&&ne(V,le)}),[V,le,$]);const ne=(e,l)=>{var s;const a=null===e||void 0===e||null===(s=e.allBets)||void 0===s?void 0:s.map((e=>{let{betId:l}=e;return l}));a&&a.length>0&&p.A.getBetListByIds(a,l).then((e=>{q(!0),O(e.data.data),se(l)}))},ce=M.reduce(((e,l)=>{const s=parseFloat(l.closing);return s<0?e.totalUserLoss+=s:e.totalUserWin+=s,e.totalClosing+=s,e.totalBets+=1,e}),{totalUserLoss:0,totalUserWin:0,totalClosing:0,totalBets:0});console.log(ce);return c.useEffect((()=>{_?H(!1):x.A.getUserBook().then((e=>{H(!0),W(e.data.data)}))}),[]),(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("div",{className:"container-fluid",children:(0,w.jsx)("div",{className:"row",children:(0,w.jsxs)("div",{className:m.Fr?"col-md-12 padding-custom":"col-md-12 mt-1",children:[(0,w.jsx)("div",{className:"card-body p15 bg-gray mb-20 d-none",children:(0,w.jsx)("form",{className:"ng-pristine ng-valid ng-touched mb-0",method:"post",onSubmit:e=>{e.preventDefault(),ae(1)},children:(0,w.jsxs)("div",{className:"row row5",children:[(0,w.jsxs)("div",{className:"col-6 col-lg-2 mbc-5",children:[(0,w.jsx)("label",{className:"label",children:"User"}),(0,w.jsx)(u.A,{onSuggestionsFetchRequested:e=>{let{value:l}=e;return x.A.getUserListSuggestion({username:l})},onSelectUser:e=>{z((0,a.A)((0,a.A)({},Z),{},{userId:e._id}))}})]}),(0,w.jsx)("div",{className:"col-6 col-lg-2 mbc-5",children:(0,w.jsxs)("div",{className:"form-group mb-0",children:[(0,w.jsx)("label",{className:"label",children:"Start Date"}),(0,w.jsx)("div",{className:"mx-datepicker",children:(0,w.jsx)("div",{className:"mx-input-wrapper",children:(0,w.jsx)("input",{name:"startDate",type:"date",autoComplete:"off",onChange:te,defaultValue:Z.startDate,placeholder:"Select Date",className:"mx-input ng-pristine ng-valid ng-touched"})})})]})}),(0,w.jsx)("div",{className:"col-6 col-lg-2 mbc-5",children:(0,w.jsxs)("div",{className:"form-group mb-0",children:[(0,w.jsx)("label",{className:"label",children:"End Date"}),(0,w.jsx)("div",{className:"mx-datepicker",children:(0,w.jsx)("div",{className:"mx-input-wrapper",children:(0,w.jsx)("input",{name:"endDate",type:"date",autoComplete:"off",defaultValue:Z.endDate,onChange:te,placeholder:"Select Date",className:"mx-input ng-untouched ng-pristine ng-valid"})})})]})}),(0,w.jsx)("div",{className:"col-12 col-lg-2 mbc-5",children:(0,w.jsxs)("div",{className:"form-group mb-0",children:[(0,w.jsx)("label",{className:"label",children:"Type"}),(0,w.jsxs)("select",{name:"reportType",onChange:te,className:"custom-select ng-untouched ng-pristine ng-valid",children:[(0,w.jsx)("option",{value:"ALL",children:"All "}),(0,w.jsx)("option",{value:"chip",children:"Deposit/Withdraw "}),(0,w.jsx)("option",{value:"game",children:"Game Report "})]})]})}),(0,w.jsxs)("div",{className:"col-12 col-lg-1 mbc-5",children:[(0,w.jsx)("label",{className:"label",children:"\xa0"}),(0,w.jsx)("button",{type:"submit",className:"btn btn-primary btn-block",children:"Submit"})]})]})})}),(0,w.jsxs)("div",{className:"card-body d-none",children:[(0,w.jsx)("div",{className:"table-responsive",children:(0,w.jsxs)("table",{className:"text-center",id:"customers1",children:[(0,w.jsx)("thead",{children:(0,w.jsxs)("tr",{children:[(0,w.jsx)("th",{style:{width:"10%",textAlign:"center",whiteSpace:"nowrap"},children:"Sr No."}),(0,w.jsxs)("th",{style:{width:"20%",textAlign:"center",whiteSpace:"nowrap"},children:["Date"," "]}),(0,w.jsxs)("th",{style:{width:"10%",textAlign:"center"},children:["Credit"," "]}),(0,w.jsx)("th",{style:{width:"10%",textAlign:"center"},children:"Debit"}),(0,w.jsx)("th",{style:{width:"10%",textAlign:"center"},children:"Balance"}),(0,w.jsx)("th",{style:{width:"10%",textAlign:"center"},children:"From"}),(0,w.jsx)("th",{style:{width:"45%",textAlign:"center"},children:"Remark"})]})}),(0,w.jsxs)("tbody",{children:[k.length<=0||k.length>0&&k.length<=0&&(0,w.jsx)("tr",{children:(0,w.jsx)("td",{colSpan:8,className:"text-center",children:"No Result Found"})}),k.length>0&&k.length>0&&0==X&&(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{children:"-"}),(0,w.jsx)("td",{className:"wnwrap",children:n()(k[0].createdAt).format(h.i$)}),(0,w.jsx)("td",{children:"-"}),(0,w.jsx)("td",{children:"-"}),(0,w.jsx)("td",{className:"wnwrap",children:Q}),(0,w.jsx)("td",{className:"wnwrap",children:"Opening Balance"})]},k[0]._id),(()=>{let e=1==X?Q:F;return M&&M.map(((l,s)=>(e+=l.amount,(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{children:l.sr_no}),(0,w.jsx)("td",{className:"wnwrap",children:l.date}),(0,w.jsx)("td",{className:"green wnwrap",children:l.credit>=0&&l.credit.toFixed(2)}),(0,w.jsx)("td",{className:"red wnwrap",children:l.credit<0&&l.credit.toFixed(2)}),(0,w.jsx)("td",{className:"green wnwrap",children:l.closing}),(0,w.jsx)("td",{children:l.stmt.txnBy}),(0,w.jsx)("td",{onClick:e=>((e,l)=>{e.preventDefault(),O({}),K(l),se(1),q(!0)})(e,l.stmt),children:(0,w.jsx)("span",{className:"pnl"==l.type?"label-button":"",children:l.narration})})]},"".concat(l._id).concat(s)))))})()]})]})}),(0,w.jsx)(r(),{breakLabel:"...",nextLabel:">>",onPageChange:e=>{const l=e.selected*Y%k.length;T(l),ee(e.selected)},pageRangeDisplayed:5,pageCount:P,containerClassName:"pagination",activeClassName:"active",previousLabel:"<<",breakClassName:"break-me"})]}),(0,w.jsx)("div",{className:"container my-4 d-none",children:(0,w.jsxs)("div",{className:"row",children:[(0,w.jsx)("div",{className:"col-6 col-lg-3",children:(0,w.jsxs)("div",{className:"dashboard-card",children:[(0,w.jsx)("h5",{children:"Total Bets"}),(0,w.jsx)("p",{children:null===ce||void 0===ce?void 0:ce.totalBets})]})}),(0,w.jsx)("div",{className:"col-6 col-lg-3",children:(0,w.jsxs)("div",{className:"dashboard-card ",children:[(0,w.jsx)("h5",{children:"Amount"}),(0,w.jsx)("p",{children:"\u20b9-"})]})}),(0,w.jsx)("div",{className:"col-6 col-lg-3",children:(0,w.jsxs)("div",{className:"dashboard-card",children:[(0,w.jsx)("h5",{children:"Casino Total"}),(0,w.jsx)("p",{children:"-"})]})}),(0,w.jsx)("div",{className:"col-6 col-lg-3",children:(0,w.jsxs)("div",{className:"dashboard-card",children:[(0,w.jsx)("h5",{children:"Sports Total"}),(0,w.jsx)("p",{children:"-"})]})}),(0,w.jsx)("div",{className:"col-6 col-lg-3",children:(0,w.jsxs)("div",{className:"dashboard-card",children:[(0,w.jsx)("h5",{children:"User Loss"}),(0,w.jsxs)("p",{children:["\u20b9 ",null===ce||void 0===ce?void 0:ce.totalUserLoss]})]})}),(0,w.jsx)("div",{className:"col-6 col-lg-3",children:(0,w.jsxs)("div",{className:"dashboard-card",children:[(0,w.jsx)("h5",{children:"User Win"}),(0,w.jsxs)("p",{children:["\u20b9 ",null===ce||void 0===ce?void 0:ce.totalUserWin]})]})}),(0,w.jsx)("div",{className:"col-6 col-lg-3",children:(0,w.jsxs)("div",{className:"dashboard-card",children:[(0,w.jsx)("h5",{children:"Panel Profit"}),(0,w.jsxs)("p",{children:["\u20b9 ",null===ce||void 0===ce?void 0:ce.totalUserLoss]})]})})]})}),(0,w.jsx)("div",{className:"master-balance-detail m-t-20",id:"master-balance-detail",children:(0,w.jsx)("div",{className:"master-balancef",children:(0,w.jsx)("div",{className:"master-balance-detail m-t-20",id:"master-balance-detail",children:(0,w.jsxs)("div",{className:"row gap-2",children:[(0,w.jsxs)("div",{className:"col-md-4 border",children:[(0,w.jsx)("label",{className:"col-md-8 text-left  p-0",children:"Upper Level Credit Referance:"}),(0,w.jsx)("span",{className:"text-right col-md-4  p-0",children:null===(e=I.uplevelcr)||void 0===e?void 0:e.toFixed(2)})]}),(0,w.jsxs)("div",{className:"col-md-4 border",children:[(0,w.jsx)("label",{className:"col-md-8 text-left p-0",children:"Down level Occupy Balance:"}),(0,w.jsx)("span",{className:"text-right col-md-4  p-0",children:null===(l=I.downlineob)||void 0===l?void 0:l.toFixed(2)})]}),(0,w.jsxs)("div",{className:"col-md-4 border",children:[(0,w.jsx)("label",{className:"col-md-8 text-left p-0 ",children:"Down Level Credit Referance:"}),(0,w.jsx)("span",{className:"text-right col-md-4  p-0",children:null===(s=I.downcr)||void 0===s?void 0:s.toFixed(2)})]}),(0,w.jsxs)("div",{className:"col-md-4 border",children:[(0,w.jsx)("label",{className:"col-md-8 text-left p-0",children:"Total Master Balance"}),(0,w.jsx)("span",{className:"text-right col-md-4 p-0",children:null===(t=I.totalmasterb)||void 0===t?void 0:t.toFixed(2)})]}),(0,w.jsxs)("div",{className:"col-md-4 border",children:[(0,w.jsx)("label",{className:"col-md-8 text-left p-0",children:"Upper Level:"}),(0,w.jsx)("span",{className:"text-right col-md-4 p-0",children:null===(d=I.upperlvell)||void 0===d?void 0:d.toFixed(2)})]}),(0,w.jsxs)("div",{className:"col-md-4 border",children:[(0,w.jsx)("label",{className:"col-md-8 text-left p-0",children:"Down Level Profit/Loss :"}),(0,w.jsx)("span",{className:"text-right col-md-4 p-0",children:null===(v=I.downpl)||void 0===v?void 0:v.toFixed(2)})]}),(0,w.jsxs)("div",{className:"col-md-4 border",children:[(0,w.jsx)("label",{className:"col-md-8 text-left p-0",children:"Available Balance:"}),(0,w.jsx)("span",{className:"text-right col-md-4 p-0",children:null===(f=I.availableB)||void 0===f?void 0:f.toFixed(2)})]}),(0,w.jsxs)("div",{className:"col-md-4 border",children:[(0,w.jsx)("label",{className:"col-md-8 text-left p-0",children:"Available Balance With Profit/Loss:"}),(0,w.jsx)("span",{className:"text-right col-md-4 p-0",children:null===(y=I.avpl)||void 0===y?void 0:y.toFixed(2)})]}),(0,w.jsxs)("div",{className:"col-md-4 border",children:[(0,w.jsx)("label",{className:"col-md-8 text-left p-0",children:"My Profit/Loss:"}),(0,w.jsx)("span",{className:"text-right col-md-4 p-0",children:null===(S=I.mypl)||void 0===S?void 0:S.toFixed(2)})]})]})})})})]})})}),(0,w.jsx)(j(),{isOpen:$,onAfterClose:()=>q(!1),onRequestClose:e=>{q(!1)},contentLabel:"Set Max Bet Limit",className:"col-md-12",ariaHideApp:!1,children:(0,w.jsxs)("div",{className:"modal-content",children:[(0,w.jsxs)("div",{className:"modal-header",children:[(0,w.jsx)("h5",{children:"Bets"}),(0,w.jsx)("button",{onClick:()=>q(!1),className:"close float-right",children:(0,w.jsx)("i",{className:"fa fa-times-circle"})})]}),(0,w.jsx)("div",{className:"modal-body",children:!A&&(0,w.jsx)(g.A,{bethistory:G,handlePageClick:e=>{ne(V,e.selected+1)},page:X,isTrash:!1})})]})})]})}},2318:(e,l,s)=>{s.d(l,{A:()=>x});var a=s(59051),t=s.n(a),n=s(99198),c=s.n(n),d=s(94635),r=s(80387),i=s(28674),o=s(54088),h=(s(74064),s(44414));const m=e=>{var l;return""!=e?(null===(l=o.a.SPORT_NAME.filter((l=>l.id==e))[0])||void 0===l?void 0:l.name)||"Casino":""},x=e=>{var l;let{bethistory:s,onTrash:a,handlePageClick:n,isTrash:o,handleSelectAll:x,selectAll:u,handleSelectItem:p}=e;const v=(0,i.G)(r.Qg),j=s&&s.docs&&s.docs.length?s.docs.map(((e,l)=>((e,l)=>{var s,n,c,r;const i=e.isBack?"back":"lay";return(0,h.jsxs)("tr",{className:i,children:[x&&(0,h.jsx)("td",{children:(0,h.jsx)("input",{type:"checkbox",checked:e.selected||!1,onChange:()=>null===p||void 0===p?void 0:p(e)})}),(null===v||void 0===v||null===(s=v.user)||void 0===s?void 0:s.role)!==d.T.user&&(0,h.jsx)("td",{className:"text-center wnwrap",children:e.parentNameStr}),(0,h.jsx)("td",{className:"text-center wnwrap",children:e.userName}),(0,h.jsx)("td",{className:"text-center wnwrap",children:e.matchName}),(0,h.jsxs)("td",{className:"text-center wnwrap",children:[e.selectionName," /"," ","Fancy"===e.marketName&&"fancy1"!==e.gtype?e.volume:e.odds," "]}),(0,h.jsx)("td",{className:"text-center wnwrap",children:m(e.sportId)}),(0,h.jsx)("td",{className:"text-center wnwrap",children:e.marketName}),(0,h.jsx)("td",{className:"text-center wnwrap",children:e.odds}),(0,h.jsx)("td",{className:"text-center wnwrap",children:e.stack}),(0,h.jsx)("td",{className:"text-center wnwrap",children:"completed"==e.status?null===e||void 0===e||null===(n=e.profitLoss)||void 0===n?void 0:n.toFixed(2):null===(c=e.pnl)||void 0===c?void 0:c.toFixed(2)}),(0,h.jsx)("td",{className:"text-center wnwrap",children:e.createdAt&&t()(null===e||void 0===e?void 0:e.createdAt).format("YYYY-MM-DD HH:mm:ss")}),o&&(0,h.jsx)("td",{className:"text-center wnwrap",children:"pending"==e.status&&(null===v||void 0===v||null===(r=v.user)||void 0===r?void 0:r.role)===d.T.admin&&(0,h.jsx)("a",{onClick:l=>a&&a(l,e),href:"#",children:(0,h.jsx)("i",{className:"fa fa-trash"})})})]},l)})(e,l))):(0,h.jsx)("tr",{children:(0,h.jsx)("td",{colSpan:11,style:{textAlign:"center"},children:"No Result Found"})});return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("table",{className:"report-table",children:[(0,h.jsx)("thead",{children:(0,h.jsxs)("tr",{children:[x&&(0,h.jsx)("th",{children:(0,h.jsx)("input",{type:"checkbox",className:"report-checkbox",checked:u||!1,onChange:x})}),(null===v||void 0===v||null===(l=v.user)||void 0===l?void 0:l.role)!==d.T.user&&(0,h.jsx)("th",{children:"Uplevel"}),(0,h.jsx)("th",{children:"User Name"}),(0,h.jsx)("th",{children:"Event Name"}),(0,h.jsx)("th",{children:"Nation"}),(0,h.jsx)("th",{children:"Event Type"}),(0,h.jsx)("th",{children:"Type"}),(0,h.jsx)("th",{children:"Rate"}),(0,h.jsx)("th",{children:"Amount"}),(0,h.jsx)("th",{children:"P/L"}),(0,h.jsx)("th",{children:"Place Date"}),o&&(0,h.jsx)("th",{children:"Action"})]})}),(0,h.jsx)("tbody",{children:j})]}),(0,h.jsx)(c(),{breakLabel:"...",nextLabel:">>",onPageChange:n,pageRangeDisplayed:5,pageCount:s.totalPages||0,containerClassName:"pagination",activeClassName:"active",previousLabel:"<<",breakClassName:"break-me"})]})}},4446:(e,l,s)=>{s.d(l,{A:()=>t});var a=s(44933);const t=new class{getAccountList(e,l){return a.Ay.post("account-statement-list?page=".concat(e),l)}getProfitLoss(e,l){return a.Ay.post("profit-loss?page=".concat(e),l)}}},41925:(e,l,s)=>{s.d(l,{LL:()=>r,O:()=>d,YG:()=>c,bi:()=>n,i$:()=>t,rx:()=>a});s(41377);const a=(e,l)=>{const s=[{value:1,symbol:""},{value:1e3,symbol:"k"},{value:1e6,symbol:"M"},{value:1e9,symbol:"G"},{value:1e12,symbol:"T"},{value:1e15,symbol:"P"},{value:1e18,symbol:"E"}].slice().reverse().find((l=>e>=l.value));return s?(e/s.value).toFixed(l).replace(/\.0+$|(\.[0-9]*[1-9])0+$/,"$1")+s.symbol:"0"},t="MMMM Do YYYY, h:mm A",n="MMMM Do, h:mm:ss A",c=e=>{const l={K:13,Q:12,A:1,J:11},s=e.match(/[A-Z]+/g);let a=0;s&&s.forEach((e=>{for(let s=0;s<e.length;s++){const t=l[e[s]];t&&(a+=t)}}));const t=e.match(/\d+/g);if(t){const e=t.reduce(((e,l)=>e+parseInt(l)),0);a+=e}return a},d=e=>e.replace("DD","").replace("CC","").replace("HH","").replace("SS",""),r=e=>e.replace("DD","").replace("CC","").replace("HH","").replace("SS","").replace("1","").replace("A","1").replace("K","wicket")}}]);