"use strict";(self.webpackChunkfair_react=self.webpackChunkfair_react||[]).push([[3311],{83311:(e,s,a)=>{a.r(s),a.d(s,{default:()=>b});var n=a(84919),c=a(9950),t=a(60666),l=a(9449),i=a(26473),r=a(27232),o=a(39564),d=a(88306),u=a(39402),m=a(97758),h=(a(70103),a(44414));const b=()=>{const e=(0,u.Y)(),{client:s,loading:a,error:b}=(0,m.h)(),g=c.useMemo((()=>t.Ik().shape({transactionPassword:t.Yj().required("Transaction Password is required")})),[]),{register:x,handleSubmit:j,reset:v,setValue:p,formState:{errors:f}}=(0,l.mN)({resolver:(0,i.t)(g),defaultValues:{isUserActive:!1,isUserBetActive:!1,transactionPassword:""}});c.useEffect((()=>{s&&(p("isUserActive",!!s.isLogin),p("isUserBetActive",!!s.betLock))}),[s,p]);const N=j((e=>{if(!s)return;const a=(0,n.A)((0,n.A)({},e),{},{username:s.username});o.A.updateUserAndBetStatus(a).then((()=>{r.oR.success("Status updated successfully"),v((0,n.A)((0,n.A)({},e),{},{transactionPassword:""}))}))}));return a?(0,h.jsx)("div",{className:"client-action-page",children:(0,h.jsx)("div",{className:"loading-state",children:"Loading client details..."})}):b||!s?(0,h.jsx)("div",{className:"client-action-page",children:(0,h.jsxs)("div",{className:"empty-state",children:["Unable to load requested client.",(0,h.jsx)("span",{children:b||"Please go back and try again."})]})}):(0,h.jsx)("div",{className:"client-action-page",children:(0,h.jsxs)("div",{className:"client-action-card",children:[(0,h.jsx)("div",{className:"client-action-back",children:(0,h.jsxs)("button",{className:"btn btn-secondary",onClick:()=>e.back(),children:[(0,h.jsx)("i",{className:"fas fa-arrow-left"})," Back"]})}),(0,h.jsxs)("div",{className:"client-action-heading",children:[(0,h.jsx)("h2",{children:"Status Control"}),(0,h.jsxs)("p",{children:["Enable or disable login/betting for ",s.username]})]}),(0,h.jsxs)("form",{className:"client-action-form",onSubmit:N,children:[(0,h.jsx)("div",{className:"client-action-hint",children:"Toggle the switches below to lock/unlock the client account or their betting ability."}),(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{children:"User Access"}),(0,h.jsxs)("div",{className:"d-flex align-items-center gap-3",children:[(0,h.jsxs)("label",{className:"mr-3 mb-0 d-flex align-items-center",children:[(0,h.jsx)("input",(0,n.A)((0,n.A)({type:"checkbox"},x("isUserActive")),{},{className:"mr-2"})),(0,h.jsx)("span",{children:s.isLogin?"Active":"Inactive"})]}),(0,h.jsx)("span",{className:"badge ".concat(s.isLogin?"badge-success":"badge-danger"),children:s.isLogin?"User can login":"Login locked"})]})]}),(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{children:"Bet Access"}),(0,h.jsxs)("div",{className:"d-flex align-items-center gap-3",children:[(0,h.jsxs)("label",{className:"mr-3 mb-0 d-flex align-items-center",children:[(0,h.jsx)("input",(0,n.A)((0,n.A)({type:"checkbox"},x("isUserBetActive")),{},{className:"mr-2"})),(0,h.jsx)("span",{children:s.betLock?"Allowed":"Locked"})]}),(0,h.jsx)("span",{className:"badge ".concat(s.betLock?"badge-success":"badge-danger"),children:s.betLock?"Bets allowed":"Bets locked"})]})]}),(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{children:"Transaction Password"}),(0,h.jsx)("input",(0,n.A)((0,n.A)({type:"password",className:"form-control"},x("transactionPassword")),{},{placeholder:"Enter transaction password"})),(null===f||void 0===f?void 0:f.transactionPassword)&&(0,h.jsx)("span",{className:"error",children:f.transactionPassword.message})]}),(0,h.jsxs)("div",{className:"client-action-footer",children:[(0,h.jsx)("button",{type:"button",className:"btn btn-outline-secondary",onClick:()=>e.back(),children:"Cancel"}),(0,h.jsxs)(d.A,{type:"submit",className:"btn btn-primary",children:[(0,h.jsx)("i",{className:"fas fa-check mr-2"})," Save Changes"]})]})]})]})})}},97758:(e,s,a)=>{a.d(s,{h:()=>l});var n=a(9950),c=a(28429),t=a(39564);const l=()=>{const{username:e}=(0,c.g)(),[s,a]=n.useState(null),[l,i]=n.useState(!0),[r,o]=n.useState(null),d=n.useCallback((()=>{if(!e)return a(null),i(!1),void o("Username missing in URL");i(!0),o(null),t.A.getParentUserDetail(e).then((e=>{var s,n;const c=null===(s=e.data)||void 0===s||null===(n=s.data)||void 0===n?void 0:n[0];a(null!==c&&void 0!==c?c:null)})).catch((()=>{a(null),o("Unable to load client details. Please try again.")})).finally((()=>i(!1)))}),[e]);return n.useEffect((()=>{d()}),[d]),{username:e,client:s,loading:l,error:r,refresh:d}}},88306:(e,s,a)=>{a.d(s,{A:()=>o});var n=a(84919),c=a(79222),t=(a(9950),a(96487)),l=a(28674),i=a(44414);const r=["children"],o=e=>{const{children:s}=e,a=(0,c.A)(e,r),o=(0,l.G)(t.Mm);return(0,i.jsx)("button",(0,n.A)((0,n.A)({disabled:o},a),{},{children:s}))}},70103:()=>{}}]);