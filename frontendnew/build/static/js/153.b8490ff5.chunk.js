"use strict";(self.webpackChunkfair_react=self.webpackChunkfair_react||[]).push([[153],{80153:(e,n,t)=>{t.r(n),t.d(n,{default:()=>p});var s=t(84919),a=t(9950),i=t(60666),r=t(9449),l=t(26473),d=t(28674),c=t(3170),o=t(39564),u=t(27232),m=t(88306),v=t(94635),h=t(39402),x=t(97758),j=(t(70103),t(44414));const p=()=>{var e;const n=(0,h.Y)(),{client:t,loading:p,error:g}=(0,x.h)(),b=(0,d.G)(c.rt),f=a.useMemo((()=>i.Ik().shape({transactionPassword:i.Yj().required("Transaction Password is required")})),[]),{register:S,handleSubmit:y,reset:N,setValue:k,getValues:A,formState:{errors:w}}=(0,r.mN)({resolver:(0,l.t)(f),defaultValues:{userId:"",userSetting:{},transactionPassword:""}});a.useEffect((()=>{var e;if(!t)return;const n=t.userSetting,s=null===(e=t.parent)||void 0===e?void 0:e.userSetting,a=n||s;k("userId",t._id||""),a&&Object.keys(a).length>0&&Object.keys(a).forEach((e=>{var n,t,s,i,r,l;k("userSetting.".concat(e,".minBet"),null!==(n=null===(t=a[e])||void 0===t?void 0:t.minBet)&&void 0!==n?n:0),k("userSetting.".concat(e,".maxBet"),null!==(s=null===(i=a[e])||void 0===i?void 0:i.maxBet)&&void 0!==s?s:0),k("userSetting.".concat(e,".delay"),null!==(r=null===(l=a[e])||void 0===l?void 0:l.delay)&&void 0!==r?r:0)}))}),[t,k]);const P=y((e=>{const n={};Object.keys(e.userSetting||{}).forEach((t=>{const s=e.userSetting[t];s&&(n[t]=s)}));const t={userId:e.userId,userSetting:n,transactionPassword:e.transactionPassword};o.A.saveGeneralSetting(t).then((e=>{u.oR.success(e.data.message||"General settings saved"),N((0,s.A)((0,s.A)({},A()),{},{transactionPassword:""}))}))}));if(p)return(0,j.jsx)("div",{className:"client-action-page",children:(0,j.jsx)("div",{className:"loading-state",children:"Loading client details..."})});if(g||!t)return(0,j.jsx)("div",{className:"client-action-page",children:(0,j.jsxs)("div",{className:"empty-state",children:["Unable to load requested client.",(0,j.jsx)("span",{children:g||"Please go back and try again."})]})});const I=null===(e=b.sports)||void 0===e?void 0:e.filter((e=>{let{sportId:n}=e;return 1===n||2===n||4===n}));return(0,j.jsx)("div",{className:"client-action-page",children:(0,j.jsxs)("div",{className:"client-action-card",children:[(0,j.jsx)("div",{className:"client-action-back",children:(0,j.jsxs)("button",{className:"btn btn-secondary",onClick:()=>n.back(),children:[(0,j.jsx)("i",{className:"fas fa-arrow-left"})," Back"]})}),(0,j.jsxs)("div",{className:"client-action-heading",children:[(0,j.jsx)("h2",{children:"General Settings"}),(0,j.jsxs)("p",{children:["Update betting limits for ",t.username]})]}),(0,j.jsxs)("form",{className:"client-action-form",onSubmit:P,children:[(0,j.jsx)("div",{className:"client-action-table",children:(0,j.jsxs)("table",{children:[(0,j.jsx)("thead",{children:(0,j.jsxs)("tr",{children:[(0,j.jsx)("th",{}),null===I||void 0===I?void 0:I.map((e=>(0,j.jsx)("th",{children:e.name},e._id)))]})}),(0,j.jsxs)("tbody",{children:[(0,j.jsxs)("tr",{children:[(0,j.jsx)("td",{children:"Min Bet"}),null===I||void 0===I?void 0:I.map((e=>{var n,a,i;return(0,j.jsx)("td",{children:(0,j.jsx)("input",(0,s.A)((0,s.A)({type:"number",min:0},S("userSetting.".concat(e.sportId,".minBet"))),{},{max:t.role!==v.T.admin?null===(n=t.parent)||void 0===n||null===(a=n.userSetting)||void 0===a||null===(i=a[e.sportId])||void 0===i?void 0:i.minBet:void 0}))},"min-".concat(e._id))}))]}),(0,j.jsxs)("tr",{children:[(0,j.jsx)("td",{children:"Max Bet"}),null===I||void 0===I?void 0:I.map((e=>{var n,a,i;return(0,j.jsx)("td",{children:(0,j.jsx)("input",(0,s.A)((0,s.A)({type:"number",min:0},S("userSetting.".concat(e.sportId,".maxBet"))),{},{max:t.role!==v.T.admin?null===(n=t.parent)||void 0===n||null===(a=n.userSetting)||void 0===a||null===(i=a[e.sportId])||void 0===i?void 0:i.maxBet:void 0}))},"max-".concat(e._id))}))]}),(0,j.jsxs)("tr",{children:[(0,j.jsx)("td",{children:"Delay"}),null===I||void 0===I?void 0:I.map((e=>{var n,a,i;return(0,j.jsx)("td",{children:(0,j.jsx)("input",(0,s.A)((0,s.A)({type:"number",min:0},S("userSetting.".concat(e.sportId,".delay"))),{},{max:t.role!==v.T.admin?null===(n=t.parent)||void 0===n||null===(a=n.userSetting)||void 0===a||null===(i=a[e.sportId])||void 0===i?void 0:i.delay:void 0}))},"delay-".concat(e._id))}))]})]})]})}),(0,j.jsxs)("div",{className:"form-group",children:[(0,j.jsx)("label",{children:"Transaction Password"}),(0,j.jsx)("input",(0,s.A)((0,s.A)({type:"password",className:"form-control"},S("transactionPassword")),{},{placeholder:"Enter transaction password"})),(null===w||void 0===w?void 0:w.transactionPassword)&&(0,j.jsx)("span",{className:"error",children:w.transactionPassword.message})]}),(0,j.jsxs)("div",{className:"client-action-footer",children:[(0,j.jsx)("button",{type:"button",className:"btn btn-outline-secondary",onClick:()=>n.back(),children:"Cancel"}),(0,j.jsxs)(m.A,{type:"submit",className:"btn btn-primary",children:[(0,j.jsx)("i",{className:"fas fa-check mr-2"})," Save Settings"]})]})]})]})})}},97758:(e,n,t)=>{t.d(n,{h:()=>r});var s=t(9950),a=t(28429),i=t(39564);const r=()=>{const{username:e}=(0,a.g)(),[n,t]=s.useState(null),[r,l]=s.useState(!0),[d,c]=s.useState(null),o=s.useCallback((()=>{if(!e)return t(null),l(!1),void c("Username missing in URL");l(!0),c(null),i.A.getParentUserDetail(e).then((e=>{var n,s;const a=null===(n=e.data)||void 0===n||null===(s=n.data)||void 0===s?void 0:s[0];t(null!==a&&void 0!==a?a:null)})).catch((()=>{t(null),c("Unable to load client details. Please try again.")})).finally((()=>l(!1)))}),[e]);return s.useEffect((()=>{o()}),[o]),{username:e,client:n,loading:r,error:d,refresh:o}}},88306:(e,n,t)=>{t.d(n,{A:()=>c});var s=t(84919),a=t(79222),i=(t(9950),t(96487)),r=t(28674),l=t(44414);const d=["children"],c=e=>{const{children:n}=e,t=(0,a.A)(e,d),c=(0,r.G)(i.Mm);return(0,l.jsx)("button",(0,s.A)((0,s.A)({disabled:c},t),{},{children:n}))}},70103:()=>{}}]);